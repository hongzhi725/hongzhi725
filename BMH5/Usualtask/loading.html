<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
	</head>
	<body>
		<img src="http://www.17sucai.com/preview/11/2015-01-19/svg-loader/svg-loaders/tail-spin.svg" style="background-color: black;"/>
		<div id="area" style="background-color: orange;width: 50%;">
			<canvas id="myCanvas" width="350" height="42"></canvas>

		</div>
		<div id="area2" style="background-color: green;width: 100px;height: 100px;">
			<span id="shuzia" style="color: red;font-size: 32px;">
				
			</span>
		</div>
		<img src="img/p1/bg.png"/>
		<img src="img/p1/p1_circle.png"/>
		<img src="img/p1/p1_crown.png"/>
		<span id="">
			
		</span>
		<script src="https://cdn.bootcss.com/PreloadJS/0.6.0/preloadjs.min.js"></script>
		<script type="text/javascript">
//			var Imglist=document.getElementsByTagName('img');
//			var length=Imglist.length;
//			var a=Imglist[0].src;
//			console.log(length);
		</script>
		<script type="text/javascript">
			//MADE BY COOKIE
			//1.loading预加载进度:定义变量 var nump
			//2.显示数字的id需设置:id=numprogress-id
			var nump;
			var numpid='shuzia';
			//-----------------常规：
			var manifest;
			var preload;
			//定义相关JSON格式文件列表
			function setupManifest() {
				manifest = [{
						src: "https://cdn.bootcss.com/PreloadJS/0.6.0/preloadjs.min.js",
						id: "preloadjs"
					}, {
						src: "js/swiper.min.js",
						id: "swiper"
					}];
			var Imglist=document.getElementsByTagName('img');
			var length=Imglist.length;
				for(var i = 0; i <= length-1; i++)
					manifest.push({
						src: Imglist[i].src
					})
			}
			//开始预加载
			function startPreload() {
				preload = new createjs.LoadQueue(true);
				//注意加载音频文件需要调用如下代码行
//				preload.installPlugin(createjs.Sound);
				preload.on("fileload", handleFileLoad);
				preload.on("progress", handleFileProgress);
				preload.on("complete", loadComplete);
				preload.on("error", loadError);
				preload.loadManifest(manifest);

			}
			//处理单个文件加载
			function handleFileLoad(event) {
//				alert('一个完毕');
				console.log("文件类型: " + event.item.type);
				if(event.item.id == "bg") {
					console.log("bg图片已成功加载");
				}
				if(event.item.id == "preloadjs") {
					console.log("preloadjs图片已成功加载");
				}
				if(event.item.id == "swiper") {
					console.log("swiper图片已成功加载");
				}
			}
			//处理加载错误：大家可以修改成错误的文件地址，可在控制台看到此方法调用
			function loadError(evt) {
				console.log("加载出错！", evt.text);
			}
			//已加载完毕进度 
			function handleFileProgress(event) {
				nump = preload.progress * 100 | 0;
				document.getElementById(numpid).innerText = nump;
				console.log(preload.progress);
				console.log(nump);
			}
			//全度资源加载完毕
			function loadComplete(event) {
				console.log("已加载完毕全部资源");
			}
			setupManifest();
			startPreload();
		</script>
	</body>
</html>